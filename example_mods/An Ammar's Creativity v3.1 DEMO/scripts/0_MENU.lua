local v0=false;local v1=false;local v2;local v3;Texts={};textLength=0;activeTexts=true;scrollDisable=false;hideIcon=false;disableInteraction=false;disableMenuUpdate=false;main_menu={{tag="storyMode",text="Story Mode",icon="menu/play"},{tag="freeplay",text="Freeplay",icon="menu/freeplay"},{tag="badges",text="Badges",icon="menu/badge"},{tag="option",text="Options",icon="menu/options"},{tag="exit",text="Exit",icon="menu/exit"}};songs={{title="< - DISCORD ANNOYER - >",tag="socialMedia",songs={{song="Discord Annoyer",bg="Discord",diff=4,desc="a"},{song="Shut Up",bg="Discord",diff=6,desc="b"},{song="Depression",bg="Discord",diff=7,desc="c"},{song="Moderator",bg="Discord",diff=5,desc="d"}}},{title="< - HATING PROBLEMS - >",tag="hatingProblems",songs={{song="Hate Comment",bg="Youtube",diff=9,desc="e"},{song="Twitter Argument",bg="Twitter",diff=11,desc="f"},{song="Google",bg="Google",diff=8,desc="g"},{song="Big Problem",bg="Youtube",diff=7,desc="h"}}},{title="< - PRACTICE - >",tag="chaosSongs",songs={{song="Chaos",bg="",diff=6,desc="i"},{song="Owen Was Her",bg="",diff=8,desc="j"},{song="Death By Notes",bg="",diff=7,desc="k"}}},{title="< - OTHER - >",tag="otherSongs",songs={{song="No Debug",bg="",diff=10,desc="l"}}}};furrySongs={{title="< - :3 - >",tag="furryWeek",songs={{song="Furry Appeared",bg="Furry",diff=99,desc="furry"}}}};story={{tag="discords",title="Discord Annoyer",songs={"Discord Annoyer","Shut Up","Depression","Moderator"},bg=""},{tag="hatingProblem",title="Hating Problem",songs={"Hate Comment","Twitter Argument","Google","Big Problem"},bg=""}};options={{text="Mechanics",type="bool",save="mechanic",description="Changes Notes Skins, Modcharts, health Drain and etc."},{text="Special Notes",type="bool",save="specialNotes",description="Hurt Notes, Question Notes and etc."},{text="Filter Curses",type="bool",save="nobadword",description="Censored Bad Words"},{text="Reduce Shakiness",type="bool",save="reduceShake",description="Reduce the screen shake Intensity"},{text="Shaders",type="bool",save="shaders",description="Enable Visual Effects"},{text="Hard Mode",type="bool",save="hardmode",description="Enable HARD MODE!!!! Increase Difficulty and scores"},{text="Updated Splashes",type="bool",save="newSplashes",description="Update Note Splashes"},{text="Cute :3 ",type="bool",save="funnyoption",description="?????"}};soundStuff={scroll="menu/scroll",cancel="cancelMenu",confirm="confirmMenu",locked="menu/locked",impact="menu/impact"};badges={{text="Social Expert",badge="social"},{text="Hater Beater",badge="hater"},{text="Furry Conversation",badge="furry"}};local v4="PhantoMuff/PhantomMuff Difficult Font.ttf";local v5="PhantoMuff/PhantomMuff Empty Letters.ttf";local v6="PhantoMuff/PhantomMuff Full Letters.ttf";curSelect=1;curMenu="main";local v7=true;uwuOption=false;menuColor={main="90db27",story="003d0d",freeplay="ffc43d",option="a6a6a6",badge="6bff97"};descTextY=0;descYCenter=0;descTextDesc={storyMode={"Let's Begin the Story!"},freeplay={"Play any song you like!"},badges={"Get the Achievements and become cool!"},option={"Change the game's mechanics."},exit={"Goodbye, come again!"},discords={"aaaaaa"},hatingProblem={"aaaaaaa"},social={"Complete Discords Week"},hater={"Complete Hater Problem"},mechanic={"Disable song special mechanics including modcharts."},specialNotes={"Remove Special Notes. Too Ez"},nobadword={"Censored Bad Words. Copyright Free"},reduceShake={"Reduce Screen Shake. No more motion sickness"},shaders={"Disable Shaders. Disable this improve performances"},hardmode={"Enable HARD MODE!!!! Increase Difficulty and scores"},potatomode={"Low effect and low quality. Useful for players who is lagging so much"},newSplashes={"Update Note Splashes"},funnyoption={"What's this"}};storyPressed=false;isMobileMode=false;buttonsPosition={buttonDown={x=1000,y=480},buttonUp={x=1000,y=260},buttonAccept={x=1000,y=20},buttonExit={x=40,y=20}};modulePath="";gamePercent=0;gameHardPercent=0;local v8=false;diffLerp=0;diffTarget=0;textsBorderSize=3.5;everUseBot=false;everUsePractice=false;DEBUGMODE=false;DEMOMODE=true;missingFile=false;function onCreate()luaDebugMode=true;v0=(songName:lower())=="ammar menu" ;addHaxeLibrary("MusicBeatState");loadSave();local v18=getPath()   .. "modules/?.lua" ;package.path=v18   .. ";"   .. package.path ;modulePath=v18;v3=require("Timer");v2=require("SpriteUtil");runHaxeCode([[setVar('modulePath', "]]   .. modulePath   .. [[")]] );runHaxeCode([[
        game.luaDebugGroup.memberAdded.add(function(member){
            member.size = 16;
        });   
    ]]);if  not v0 then addLuaScript("scripts/engine/engine");addLuaScript("scripts/engine/death");addLuaScript("scripts/engine/cutscene");addLuaScript("scripts/engine/introSong");else setProperty("canPause",false);setProperty("skipCountdown",true);precacheMusic("Menu_end");v7=getPropertyFromClass("ClientPrefs","shaders");setPropertyFromClass("ClientPrefs","shaders",true);end if v0 then local v129={"loading0","loading1","loading2","loading3","loading4"};local v130=v129[getRandomInt(1, #v129)];setDataFromSave("ammarc","loadingImage",v130);end v2.makeSprite({tag="loading",image="loading/"   .. getDataFromSave("ammarc","loadingImage") ,cam="other"});screenCenter("loading");setProperty("loading.alpha",0);if ( not v0 and (getDataFromSave("ammarc","prevSong")=="ammar-menu")) then setProperty("loading.alpha",1);doTweenAlpha("hideloading","loading",0,0.8);setPropertyFromClass("CustomFadeTransition","nextCamera",nil);end setPropertyFromClass("openfl.Lib","application.window.title","Friday Night Funkin': An Ammar Creativity V3");if (buildTarget=="android") then isMobileMode=true;end if (isMobileMode and v0) then setProperty("androidc.hbox.x",2000);setProperty("androidc.newhbox.x",2000);setProperty("androidc.vpad.x",2000);end addHaxeLibrary("FlxText","flixel.text");addHaxeLibrary("FlxTextAlign","flixel.text.FlxText");addHaxeLibrary("FlxTimer","flixel.util");addHaxeLibrary("JsonParser","haxe.format");addHaxeLibrary("Song","");if (getDataFromSave("ammarc","hardmode") and false) then local v131=songName:lower();local v132="data/"   .. v131   .. "/"   .. v131   .. "-hardmode.json" ;local v133=checkFileExists(v132);local v134=getTextFromFile(v132,false);if v133 then runHaxeCode([[
                PlayState.SONG = Song.loadFromJson("discord-annoyer-hard");
                game.addTextToDebug(game.SONG.notes, 0xFFFF0000);
            ]]);end end setProperty("playbackRate",1);if  not checkFileExists("scripts/zzz.lua") then runHaxeCode('game.addTextToDebug("MISSING SCRIPT DETECTED [zzz.lua]", 0xFFFF0000)');missingFile=true;end end function getPath()local v20=debug.getinfo(2,"S").source:sub(2);return v20:match("(.*/)");end function onSongStart()if v0 then v1=false;endSong();playMusic("Menu",0.8,true);end end function onEndSong()saveHighscore();if  not v0 then doTweenAlpha("showloading","loading",1,0.8);v3.startTimer(1,function(v162,v163)if getPropertyFromClass("PlayState","isStoryMode") then v1=true;else loadSong("ammar menu");end end,1);end return (((v0 and  not v1) or ( not v0 and  not v1)) and Function_Stop) or Function_Continue ;end function onDestroy()if v0 then setPropertyFromClass("ClientPrefs","shaders",v7);end setPropertyFromClass("openfl.Lib","application.window.title","Friday Night Funkin': Psych Engine");setDataFromSave("ammarc","prevSong",(songName:gsub(" ","-")):lower());end bgPos={};local function v9()addHaxeLibrary("FlxBackdrop","flixel.addons.display");if (getDataFromSave("ammarc","shaders") and getPropertyFromClass("ClientPrefs","shaders")) then initLuaShader("scroll");end if uwuOption then menuColor.main="cc0cc4";end runHaxeCode([[
        camMenu = new FlxCamera();
        camMenu.bgColor = 0x00;

        game.variables.set("camMenu", camMenu);

        FlxG.cameras.remove(game.camOther,false);
        FlxG.cameras.add(camMenu,false);
        FlxG.cameras.add(game.camOther,false);
    ]]);setProperty("camGame.visible",false);setProperty("camHUD.visible",false);v2.makeSprite({tag="textsPos",x= -100});v2.makeSprite({tag="bg",graphicColor=="FFFFFF" ,graphicWidth=1300,graphicHeight=800});runHaxeCode("game.getLuaObject('bg').camera = camMenu;");screenCenter("bg");setProperty("bg.alpha",1);setProperty("bg.color",getColorFromHex(menuColor.main));bgPos={x=getProperty("bg.x"),y=getProperty("bg.u")};v2.makeSprite({tag="check1",image="menu/blackDots",x=0,y=200});runHaxeCode("game.getLuaObject('check1').camera = camMenu;");setProperty("check1.alpha",0.25);if (getDataFromSave("ammarc","shaders") and getPropertyFromClass("ClientPrefs","shaders")) then setSpriteShader("check1","scroll");setShaderFloat("check1","xSpeed", -0.1);setShaderFloat("check1","ySpeed",0);setShaderFloat("check1","timeMulti",0.2);end v2.makeAnimateSprite({tag="ammar",image="menu/ammar",x= -800});addAnimationByPrefix("ammar","loop","ammar",3,true);runHaxeCode("game.getLuaObject('ammar').camera = camMenu;");screenCenter("ammar","");setProperty("ammar.alpha",0.8);v2.makeAnimateSprite({tag="barder",image="menu/barder",x= -800});addAnimationByPrefix("barder","loop","barder",4,true);runHaxeCode("game.getLuaObject('barder').camera = camMenu;");screenCenter("barder","y");setProperty("barder.alpha",0.85);scaleObject("barder",1,1.2);setObjectOrder("check1",getObjectOrder("ammar") -1 );doTweenX("posXItem","textsPos",0,1.5,"expoOut");doTweenX("barderCome","barder", -20,1.5,"expoOut");v2.makeText({tag="descTxt",text="ava",width=400,font=v6,align="center",borderColor="0xFF000000",size=20,borderSize=2,borderQuality=1,x=800,y=550});screenCenter("descTxt","y");descYCenter=getProperty("descTxt.y");setProperty("descTxt.y",550);descTextY=getProperty("descTxt.y");runHaxeCode("game.getLuaObject('descTxt').camera = camMenu;");loadStoryBG();v2.makeSprite({tag="barD",graphicWidth=1400,graphicHeight=300,graphicColor="000000"});runHaxeCode("game.getLuaObject('barD').camera = camMenu;");screenCenter("barD","X");setProperty("barD.y",720 -50 );v2.makeSprite({tag="barU",graphicWidth=1400,graphicHeight=300,graphicColor="000000"});runHaxeCode("game.getLuaObject('barU').camera = camMenu;");screenCenter("barU","X");setProperty("barU.y", -300 + 50 );local v21=0.5;setProperty("barD.alpha",v21);setProperty("barU.alpha",v21);setProperty("barD.visible",false);setProperty("barU.visible",false);v2.makeSprite({tag="textsOrder",graphicWidth=0,graphicHeight=0,graphicColor="0x00FFFFFF"});runHaxeCode("game.getLuaObject('textsOrder').camera = camMenu;");createTexts(main_menu,true);v2.makeText({tag="hardTxt",text="(HARD MODE)",width=400,font=v6,align="right",borderColor="0xFF000000",size=32,borderSize=2,borderQuality=1,x=856,y=660});setTextColor("hardTxt","FF0000");setProperty("hardTxt.alpha",0);runHaxeCode("game.getLuaObject('hardTxt').camera = camMenu;");v2.makeText({tag="infoTxt",text="Difficulty : 10",width=400,font=v6,align="right",borderColor="0xFF000000",size=32,borderSize=2,borderQuality=1,x=856,y=660});setProperty("infoTxt.alpha",0);runHaxeCode("game.getLuaObject('infoTxt').camera = camMenu;");for v78=1, #main_menu do local v79="micon"   .. main_menu[v78].tag ;v2.makeSprite({tag="micon"   .. main_menu[v78].tag ,image=main_menu[v78].icon});runHaxeCode("game.getLuaObject('"   .. v79   .. "').camera = camMenu;" );main_menu[v78].iconSpr=v79;screenCenter(v79,"Y");setProperty(v79   .. ".x" ,1400);scaleObject(v79,0.85,0.85);end v2.makeText({tag="hardfirstTxt",text="Play Normal Mode First",width=400,font=v6,align="center",borderColor="0xFF000000",size=32,borderSize=2,borderQuality=1,x=856,y=660});setProperty("hardfirstTxt.alpha",0);runHaxeCode("game.getLuaObject('hardfirstTxt').camera = camMenu;");screenCenter("hardfirstTxt");v2.makeSprite({tag="blackBGbar",graphicColor="000000",graphicWidth=1300,graphicHeight=800});runHaxeCode("game.getLuaObject('blackBGbar').camera = camMenu;");screenCenter("blackBGbar");setProperty("blackBGbar.alpha",0);v2.makeSprite({tag="gameBarBG",graphicWidth=810,graphicHeight=20,graphicColor="000000",y=50 -5 });runHaxeCode("game.getLuaObject('gameBarBG').camera = camMenu;");screenCenter("gameBarBG","X");v2.makeSprite({tag="gameBar",graphicWidth=800,graphicHeight=10,graphicColor="FFFFFF",y=50});runHaxeCode("game.getLuaObject('gameBar').camera = camMenu;");screenCenter("gameBar","X");v2.makeSprite({tag="gameHardBar",graphicWidth=800,graphicHeight=10,graphicColor="FF0000",y=50});runHaxeCode("game.getLuaObject('gameHardBar').camera = camMenu;");screenCenter("gameHardBar","X");setBlendMode("gameHardBar","add");v2.makeText({tag="gameBarText",text=(DEMOMODE and "Demo Progress") or "Game Progress" ,width=600,font="gaposiss.ttf",align="left",borderColor="0xFF000000",size=20,borderSize=2,borderQuality=0,x=1300,y=26});runHaxeCode("game.getLuaObject('gameBarText').camera = camMenu;");setProperty("gameBar.colorTransform.greenMultiplier",0);setProperty("gameBar.colorTransform.redMultiplier",1);setProperty("gameBar.colorTransform.blueMultiplier",0);setProperty("gameBarBG.scale.x",0);setProperty("gameBar.scale.x",0);setProperty("gameBar.origin.x",0);setProperty("gameHardBar.scale.x",0);setProperty("gameHardBar.origin.x",0);calculateGamePercent();showGameBar();v2.makeText({tag="gameText",text="An Ammar Creativity v3 DEMO"   .. ((getDataFromSave("ammarc","youtubeshort") and " | YOUTUBE SHORT MODE") or "") ,align="left",borderColor="0xFF000000",size=16,borderSize=2,borderQuality=1,x=10,y=720 -30 });runHaxeCode("game.getLuaObject('gameText').camera = camMenu;");v2.makeSprite({tag="locked",image="locked"});runHaxeCode("game.getLuaObject('locked').camera = camMenu;");screenCenter("locked");setProperty("locked.alpha",0);v2.makeSprite({tag="buttonDown",image="menu/mobileButtonMove",x=1000,y=480,cam="other",xSize=0.6});setProperty("buttonDown.antialiasing",false);setProperty("buttonDown.angle",90);updateHitbox("buttonDown");doTweenAlpha("buttonDownAlpha","buttonDown",0.25,2,"quadIn");v2.makeSprite({tag="buttonUp",image="menu/mobileButtonMove",x=1000,y=260,cam="other",xSize=0.6});setProperty("buttonUp.antialiasing",false);setProperty("buttonUp.angle", -90);updateHitbox("buttonUp");doTweenAlpha("buttonUpAlpha","buttonUp",0.25,2,"quadIn");v2.makeSprite({tag="buttonAccept",image="menu/mobileButtonAccept",x=1000,y=20,cam="other",xSize=0.6});setProperty("buttonAccept.antialiasing",false);updateHitbox("buttonAccept");doTweenAlpha("buttonAcceptAlpha","buttonAccept",0.25,2,"quadIn");v2.makeSprite({tag="buttonExit",image="menu/mobileButtonExit",x= -400,y=20,cam="other",xSize=0.6});setProperty("buttonExit.antialiasing",false);updateHitbox("buttonExit");doTweenAlpha("buttonExitAlpha","buttonExit",0.25,2,"quadIn");if  not isMobileMode then setProperty("buttonDown.visible",false);setProperty("buttonUp.visible",false);setProperty("buttonAccept.visible",false);setProperty("buttonExit.visible",false);end precacheImage("menu/badgeGot");precacheImage("menu/badgeNotGot");precacheImage("menu/checkboxanim");end function showGameBar()if (gamePercent>0) then disableInteraction=true;doTweenAlpha("blackBGbar","blackBGbar",0.8,0.5);setProperty("gameBarText.x",1300);doTweenX("gameBarBGSc","gameBarBG.scale",1,1,"quadOut");doTweenX("gameBarTextCome","gameBarText",238,1,"quadOut");v3.startTimer(1,function(v164,v165)doTweenX("gameBarSc","gameBar.scale",gamePercent/100 ,1,"quadOut");doTweenX("gameHardBarSc","gameHardBar.scale",gameHardPercent/100 ,1,"quadOut");runHaxeCode("FlxTween.tween(game.getLuaObject('gameBar').colorTransform, {greenMultiplier: "   .. tostring(gamePercent/100 )   .. ", redMultiplier: "   .. tostring(1 -(gamePercent/100) )   .. "}, 1)" );end,1);v3.startTimer(2,function(v166,v167)disableInteraction=false;doTweenAlpha("blackBGbar","blackBGbar",0,0.5);if (gamePercent>=100) then setTextString("gameBarText",getTextString("gameBarText")   .. " (THE END)" );setProperty("gameBar.colorTransform.greenMultiplier",3);setProperty("gameBar.colorTransform.redMultiplier",3);setProperty("gameBar.colorTransform.blueMultiplier",3);runHaxeCode("FlxTween.tween(game.getLuaObject('gameBar').colorTransform, {greenMultiplier:1, redMultiplier: 0, blueMultiplier: 0}, 0.5)");runHaxeCode("camMenu.shake(0.002, 0.5)");end end,1);end end function onCreatePost()createOptionVar();if v0 then v9();end if (isMobileMode and  not v0) then runHaxeCode([[
            game.androidc.camera = game.camOther;
        ]]);end end function showLocked()playSound(soundStuff.locked,0.6,soundStuff.locked);setProperty("locked.alpha",0.8);scaleObject("locked",0.6,0.6,false);doTweenAlpha("showLocked","locked",0,0.8);doTweenX("showLockedScX","locked.scale",0.65,0.8,"quadOut");doTweenY("showLockedScY","locked.scale",0.65,0.8,"quadOut");end local v10="";local v11="";function typeText(v22,v23,v24)cancelTimer("typeText");setTextString(v22,"");v10=v23;v11=v22;runTimer("typingText",v24/ #v10 , #v10);end function createTexts(v25,v26,v27)local v27=v27 or {} ;if v26 then for v168=1, #Texts do removeLuaText(Texts[v168].tag);if (Texts[v168].checkbox~=nil) then removeLuaSprite(Texts[v168].checkbox,true);end if (Texts[v168].badge~=nil) then removeLuaSprite(Texts[v168].badge,true);end end curSelect=1;Texts={};end for v81=1, #v25 do local v82=v25[v81];v2.makeText({tag=v82.tag or v82.text or v82.song or (v82.title:lower()):gsub(" ","") ,text=(uwuOption and v82.text:gsub("r","w")) or v82.text or v82.song or v82.title ,font=v27.font or v4 ,align="left",borderColor=v27.color or "0xA0000000" ,size=v27.size or 100 ,borderSize=v27.borderSize or 5 ,borderQuality=1,x= -800,y=400 + (v81 * 50) });setObjectOrder(v82.tag,getObjectOrder("textsOrder") -1 );runHaxeCode("game.getLuaObject('"   .. v82.tag   .. "').camera = camMenu;" );table.insert(Texts,{tag=v82.tag});end textLength= #Texts;changeSelection(0,true);end function createFreeplay()for v83=1, #Texts do removeLuaText(Texts[v83].tag);end curSelect=1;Texts={};doTweenAlpha("showDifficulty","infoTxt",1,0.5);if getDataFromSave("ammarc","hardmode") then doTweenAlpha("showHardModeTxt","hardTxt",1,0.5);end setProperty("infoTxt.y",660 + ((getDataFromSave("ammarc","hardmode") and  -35) or 0) );for v84,v85 in pairs((uwuOption and furrySongs) or songs ) do v2.makeText({tag="t"   .. v85.tag ,text=v85.title,font=v5,align="left",borderColor="0xFF000000",size=55,borderSize=textsBorderSize,borderQuality=1,x= -800,y=(720/2) -(55/2) });setObjectOrder("t"   .. v85.tag ,getObjectOrder("textsOrder") -1 );runHaxeCode("game.getLuaObject('"   .. "t"   .. v85.tag   .. "').camera = camMenu;" );table.insert(Texts,{tag="t"   .. v85.tag ,isTitle=true});for v136,v137 in pairs(v85.songs) do local v138=(v137.song:gsub(" ","-")):lower();local v139=(uwuOption and v137.song:gsub("r","w")) or v137.song ;local v140=isSongLocked(v137.song,v137);local v141=(v140 and v139:gsub("[a-zA-Z0-9_.-]","?")) or v139 ;v2.makeText({tag=v138,text=v141,font=v6,align="left",borderColor="0xFF000000",size=50,borderSize=textsBorderSize,borderQuality=1,x= -800,y=400 + ((v84 + v136) * 50) });if (v137.requireSong~=nil) then local v187=getDataFromSave("ammarc","highscore");local v188=true;for v206,v207 in pairs(v137.requireSong) do local v208=(v207:gsub(" ","-")):lower();if (v187[v208]==nil) then v188=false;break;end end if  not v188 then setTextString(v138,"???");end end setObjectOrder(v138,getObjectOrder("textsOrder") -1 );runHaxeCode("game.getLuaObject('"   .. v138   .. "').camera = camMenu;" );table.insert(Texts,{tag=v138,isTitle=false,song=v137.song,desc=v137.desc,diff=v137.diff,locked=v140});end end textLength= #Texts;changeSelection(1,true);end function isSongLocked(v28,v29)local v28=string.gsub(v28:lower()," ","-");if (DEMOMODE and  not DEBUGMODE) then local v142={"discord-annoyer","shut-up","hate-comment","twitter-argument"};for v169,v170 in pairs(v142) do if (v28==v170) then return false;end end if ((v28=="no-debug") and isSongBeated("no-debug")) then return false;end end return true;end function createBadge()for v86=1, #Texts do removeLuaText(Texts[v86].tag);if (Texts[v86].badge~=nil) then removeLuaSprite(Texts[v86].badge,true);end end curSelect=1;Texts={};for v87,v88 in pairs(badges) do local v89=(v88.badge:gsub(" ","-")):lower();v2.makeText({tag=v89,text=v88.text,font=v6,align="left",borderColor="0xFF000000",size=50,borderSize=textsBorderSize,borderQuality=1,x= -800,y=400 + (v87 * 50) });runHaxeCode("game.getLuaObject('"   .. v89   .. "').camera = camMenu;" );local v90=checkBadgeGot(v88.badge);local v91=v89   .. "badgeG" ;local v92=(v90 and "badgeGot") or "badgeNotGot" ;v2.makeSprite({tag=v91,image="menu/"   .. v92 ,x=200,y=200,xSize=0.5});setObjectOrder(v91,getObjectOrder("textsOrder") -1 );runHaxeCode("game.getLuaObject('"   .. v91   .. "').camera = camMenu;" );local v93=getDataFromSave("ammarc","badges");if  not v90 then local v171="";local v172=getTextString(v89);for v189=1, #v172 do if (string.sub(v172,v189,v189)~=" ") then v171=v171   .. "?" ;else v171=v171   .. " " ;end end setTextString(v89,v171);end table.insert(Texts,{tag=v89,isTitle=false,badge=v91});end textLength= #Texts;changeSelection(0,true);end function createStory()for v94=1, #Texts do removeLuaText(Texts[v94].tag);end curSelect=1;Texts={};for v95,v96 in pairs(v96) do v2.makeText({tag=v96.tag,text=v96.title,font=v6,align="center",borderColor="0xFF000000",size=65,borderSize=textsBorderSize,borderQuality=1,x=(1280/2) -300 ,y=800});setProperty(v96.tag   .. ".visible" ,false);setProperty(v96.tag   .. ".alpha" ,0);setObjectOrder(v96.tag,getObjectOrder("textsOrder") -1 );runHaxeCode("game.getLuaObject('"   .. v96.tag   .. "').camera = camMenu;" );table.insert(Texts,{tag=v96.tag,isTitle=false,story=v96.title,songs=v96.songs});end textLength= #Texts;changeSelection(0,true);end function calculateGamePercent()local v30=getDataFromSave("ammarc","highscore");local v31=directoryFileList("mods"   .. (((currentModDirectory=="") and "") or ("/"   .. currentModDirectory))   .. "/songs" );if DEMOMODE then v31={"Discord-Annoyer","Shut-Up","Hate-Comment","Twitter-Argument","No-Debug"};end local v32= #v31;local v33=0;local v34=0;for v97,v98 in pairs(v30) do for v143,v144 in pairs(v31) do if (string.gsub(v144:lower(),"-"," ")==string.gsub(v97:lower(),"-"," ")) then v33=v33 + 1 ;end end for v145,v146 in pairs(v31) do if (string.gsub(v146:lower(),"-"," ")==string.gsub(v97:lower(),"-"," ")) then if isSongBeated(string.gsub(v146:lower()," ","-"),true) then v34=v34 + 1 ;end end end end gamePercent=math.min(100,(v33/v32) * 100 );gameHardPercent=math.min(100,(v34/v32) * 100 );end function createOption()for v99=1, #Texts do removeLuaText(Texts[v99].tag);end curSelect=1;Texts={};for v100,v101 in pairs(options) do local v102=(v101.save:gsub(" ","-"));v2.makeText({tag=v102,text=v101.text,font=v6,align="left",borderColor="0xFF000000",size=50,borderSize=textsBorderSize,borderQuality=1,x= -800,y=400 + (v100 * 50) });setProperty(v102   .. ".borderQuality" ,1);setObjectOrder(v102,getObjectOrder("textsOrder") -1 );runHaxeCode("game.getLuaObject('"   .. v102   .. "').camera = camMenu;" );if (v102=="funnyoption") then setTextBorder(v102,5,"8c0088");setTextColor(v102,"ff00f7");end local v103=v102   .. "checkbox" ;v2.makeAnimateSprite({tag=v103,image="checkboxanim",x=100,y=100});addAnimationByPrefix(v103,"off","checkbox0");addAnimationByPrefix(v103,"turnOff","checkbox anim reverse0",24,false);addAnimationByPrefix(v103,"turnOn","checkbox anim0",24,false);addAnimationByPrefix(v103,"on","checkbox finish0");setObjectOrder(v103,getObjectOrder("textsOrder") -1 );addOffset(v103,"turnOff",28,28);addOffset(v103,"turnOn",37,28);runHaxeCode([[
            var checkbox = game.getLuaObject(']]   .. v103   .. [[');
            checkbox.animation.finishCallback = function(name){
                switch (name) {
                    case "turnOff": 
                        checkbox.animation.play("off", true);
                        checkbox.offset.set(0,0);
                    case "turnOn": 
                        checkbox.animation.play("on", true);
                        checkbox.offset.set(5, 12);
                }
            }
        ]] );playAnim(v103,"turnOff",true);if (v101.type=="bool") then if getDataFromSave("ammarc",v101.save) then playAnim(v103,"turnOn",true);end end runHaxeCode("game.getLuaObject('"   .. v103   .. "').camera = camMenu;" );table.insert(Texts,{tag=v102,isTitle=false,checkbox=v103,option=v101});end textLength= #Texts;changeSelection(0,true);end function menuUpdate(v35)setProperty("bg.x",bgPos.x + (math.cos(os.clock()) * 5) );setProperty("bg.y",lerp(getProperty("bg.y"),curSelect * (1/textLength) *  -40 ,v35 * 4 ));setProperty("barU.angle",math.sin(os.clock() * 1.1 ) * 1 );setProperty("barD.angle",math.sin((os.clock() * 1.1) + 1 ) * 1 );setProperty("barder.y",lerp(getProperty("barder.y"),(curSelect/textLength) *  -25 ,v35 * 7 ));setProperty("check1.y",80 + (math.sin(os.clock()) * 5) );setProperty("descTxt.y",lerp(getProperty("descTxt.y"),descTextY,v35 * 5 ));if (getDataFromSave("ammarc","shaders") and getPropertyFromClass("ClientPrefs","shaders")) then setShaderFloat("check1","iTime",os.clock());end if activeTexts then for v173=1,textLength do local v174=Texts[v173].tag or Texts[v173].title ;local v175=((curMenu=="freeplay") and 80) or 140 ;local v176=getProperty("textsPos.x");setProperty(v174   .. ".y" ,lerp(getProperty(v174   .. ".y" ),(360 -50) + ((v173-curSelect) * v175) + (((curMenu=="story") and 190) or 0) ,v35 * 8 ));if (curMenu=="story") then setProperty(v174   .. ".x" ,lerp(getProperty(v174   .. ".x" ),(1280/2) -(getProperty(v174   .. ".width" )/2) ,v35 * 8 ) + v176 );else setProperty(v174   .. ".x" ,lerp(getProperty(v174   .. ".x" ),50 + math.abs((v173-curSelect) * 20 ) ,v35 * 8 ) + v176 + (((v174=="funnyoption") and getRandomFloat( -2,2)) or 0) );end if (curMenu=="option") then local v209=Texts[v173].checkbox;setProperty(v209   .. ".y" ,(getProperty(v174   .. ".y" ) + (getProperty(v174   .. ".height" )/2)) -(getProperty(v209   .. ".height" )/2) );setProperty(v209   .. ".x" ,getProperty(v174   .. ".x" ) + getProperty(v174   .. ".width" ) + 100 + v176 + (((v174=="funnyoption") and getRandomFloat( -5,5)) or 0) );end if (curMenu=="badges") then local v210=Texts[v173].badge;setProperty(v210   .. ".y" ,(getProperty(v174   .. ".y" ) + (getProperty(v174   .. ".height" )/2)) -(155.5/2) );setProperty(v210   .. ".x" ,getProperty(v174   .. ".x" ) + (getProperty(v174   .. ".width" ) * getProperty(v174   .. ".scale.x" )) +  -25 + v176 );end local v177=((v173==curSelect) and lerp(getProperty(v174   .. ".scale.x" ),1.2,v35 * 8 )) or lerp(getProperty(v174   .. ".scale.x" ),1,v35 * 8 ) ;scaleObject(v174,v177,v177,false);if (curMenu~="story") then setProperty(v174   .. ".origin.x" ,0);end end end for v104=1, #main_menu do setProperty(main_menu[v104].iconSpr   .. ".x" ,lerp(getProperty(main_menu[v104].iconSpr   .. ".x" ),((curMenu=="main") and (v104==curSelect) and  not hideIcon and 800) or 1400 ,v35 * 9 ));end if (curMenu=="story") then updateStoryBG();end if (curMenu=="freeplay") then diffTarget=Texts[curSelect].diff;diffLerp=math.floor(lerp(diffLerp,diffTarget,v35 * 7 ) * 1000 )/1000 ;if Texts[curSelect].locked then setTextString("infoTxt","Coming Soon");else setTextString("infoTxt","Difficulty : "   .. math.ceil(math.ceil(diffLerp * 100 )/100 ) );end screenCenter("descTxt","y");end if ( not storyPressed and  not disableInteraction) then if (keyboardJustPressed("ESCAPE") or spriteClick("buttonExit")) then backSelection();setProperty("barder.x", -75);doTweenX("barderCome","barder", -20,0.75,"quadOut");end if ((keyJustPressed("up") or spriteClick("buttonUp")) and  not scrollDisable) then changeSelection( -1);end if ((keyJustPressed("down") or spriteClick("buttonDown")) and  not scrollDisable) then changeSelection(1);end if ((keyJustPressed("accept") or spriteClick("buttonAccept")) and  not scrollDisable) then if (curMenu=="option") then acceptOption();elseif (curMenu=="story") then acceptStory();else acceptSelection();end setProperty("barder.x", -75);doTweenX("barderCome","barder", -20,0.75,"quadOut");end if (keyboardJustPressed("P") and (curMenu=="option")) then setDataFromSave("ammarc","youtubeshort",getDataFromSave("ammarc","youtubeshort")==false );setTextString("gameText","An Ammar Creativity v3 DEMO"   .. ((getDataFromSave("ammarc","youtubeshort") and " | YOUTUBE SHORT MODE") or "") );end end end function acceptOption()local v36=Texts[curSelect];if (v36.option.type=="bool") then if ((v36.option.save=="funnyoption") and  not DEBUGMODE and true) then showLocked();else if ((v36.option.save=="funnyoption") and (getDataFromSave("ammarc",v36.option.save)==false)) then openCustomSubstate("funnyoptionwarn",false);end setDataFromSave("ammarc",v36.option.save,getDataFromSave("ammarc",v36.option.save)==false );local v190=(getDataFromSave("ammarc",v36.option.save) and "turnOn") or "turnOff" ;playAnim(v36.checkbox,v190,true);end end end function acceptStory()if storyPressed then return;end local v37=Texts[curSelect].tag;storyPressed=true;playSound(soundStuff.confirm,0.6,soundStuff.confirm);playMusic("Menu_end",0.8,false);disableInteraction=true;doTweenZoom("zoomCam","camMenu",5,3,"expoIn");cameraFlash("camOther","0xA0FFFFFF",1,false);hideButtons();v3.startTimer(2.1,function(v105,v106)doTweenAlpha("showloading","loading",1,0.8);end,1);setPropertyFromClass("CustomFadeTransition","nextCamera",nil);v3.startTimer(3,function(v107,v108)local v109={};for v148,v149 in pairs(story) do if (v149.tag==v37) then v109=v149.songs;break;end end setPropertyFromClass("PlayState","isStoryMode",true);setPropertyFromClass("PlayState","campaignScore",0);setPropertyFromClass("PlayState","campaignMisses",0);setPropertyFromClass("PlayState","storyPlaylist",v109);loadSong(v109[1], -1);end,1);end local v12="";function playSong(v38)if getDataFromSave("ammarc","hardmode") then if isSongBeated(string.gsub(v38:lower()," ","-"),false) then playSound(soundStuff.impact,0.8,soundStuff.impact);setTextAlignment("hardTxt","center");setTextSize("hardTxt",100);setTextWidth("hardTxt", -1);screenCenter("hardTxt");setProperty("infoTxt.y",660);cameraFlash("camOther","0xD0FF0000",2);else playSound(soundStuff.locked,0.8,soundStuff.locked);setProperty("hardfirstTxt.alpha",1);doTweenAlpha("hardfirstTxt","hardfirstTxt",0,1,"quadIn");return;end else cameraFlash("camOther","0x50FFFFFF",2);end hideButtons();setPropertyFromClass("CustomFadeTransition","nextCamera",nil);playSound(soundStuff.confirm,0.6,soundStuff.confirm);playMusic("Menu_end",0.8,false);disableInteraction=true;cameraFlash("camOther","0x50FFFFFF",2);for v110,v111 in pairs(Texts) do if (v110==curSelect) then doTweenX(v111.tag   .. "pressX" ,v111.tag   .. ".scale" ,1.3,1,"quadOut");doTweenY(v111.tag   .. "pressY" ,v111.tag   .. ".scale" ,1.3,1,"quadOut");else doTweenAlpha(v111.tag   .. "hide" ,v111.tag,0,1,"linear");end end v12=v38;if (string.gsub(v38:lower()," ","-")=="no-debug") then setDataFromSave("ammarc","realDebugSong",true);end v3.startTimer(1.7,function(v112,v113)doTweenAlpha("showloading","loading",1,0.8);runTimer("playSong",1);end,1);end function acceptSelection()local v39=Texts[curSelect].tag:lower();local v40=true;if (((v39=="storymode") or (v39=="badges")) and DEMOMODE) then showLocked();return;end if (curMenu=="freeplay") then v40=false;if Texts[curSelect].locked then showLocked();v40=false;else playSong(Texts[curSelect].song);end playSound(soundStuff.confirm,0.6,soundStuff.confirm);elseif (v39=="exit") then setProperty("bg.visible",false);setProperty("check1.visible",false);setProperty("barder.visible",false);setProperty("ammar.visible",false);v1=true;disableInteraction=true;v3.startTimer(1,function(v211,v212)exitSong();end,1);elseif (v39=="storymode") then activeTexts=false;hideIcon=true;v3.startTimer(0.5,function(v215,v216)curMenu="story";createStory();activeTexts=true;hideIcon=false;end,1);doTweenColor("bgColor","bg",menuColor.story,1);doTweenAlpha("barUAlpha","barU",0.6,1);doTweenAlpha("barDAlpha","barD",0.6,1);elseif (v39=="freeplay") then activeTexts=false;hideIcon=true;v3.startTimer(0.5,function(v217,v218)curMenu="freeplay";createFreeplay();activeTexts=true;hideIcon=false;end,1);doTweenColor("bgColor","bg",menuColor.freeplay,1);elseif (v39=="badges") then activeTexts=false;hideIcon=true;v3.startTimer(0.5,function(v219,v220)curMenu="badges";createBadge();activeTexts=true;hideIcon=false;end,1);doTweenColor("bgColor","bg",menuColor.badge,1);elseif (v39=="option") then activeTexts=false;hideIcon=true;v3.startTimer(0.5,function(v221,v222)curMenu="option";createOption();activeTexts=true;hideIcon=false;end,1);doTweenColor("bgColor","bg",menuColor.option,1);else runHaxeCode("camMenu.shake(0.002, 0.25)");end if ((v39=="storymode") or (v39=="freeplay") or (v39=="option") or (v39=="badges")) then descTextY=descYCenter;for v178,v179 in pairs(Texts) do if (v178==curSelect) then scaleObject(v179.tag,1.3,1.3,false);doTweenX(v179.tag   .. "pressX" ,v179.tag   .. ".scale" ,1.1,0.5,"quadOut");doTweenY(v179.tag   .. "pressY" ,v179.tag   .. ".scale" ,1.1,0.5,"quadOut");else doTweenX(v179.tag   .. "move" ,v179.tag, -800,0.5,"quadIn");end end v3.startTimer(0.05,function(v180,v181)if ((v181%2)==0) then setProperty(Texts[curSelect].tag   .. ".visible" ,true);else setProperty(Texts[curSelect].tag   .. ".visible" ,false);end end,10);v3.startTimer(0.47,function(v182,v183)setProperty("textsPos.x", -100);doTweenX("posXItems","textsPos",0,0.5,"expoOut");end,1);doTweenX("buttonExit","buttonExit",buttonsPosition['buttonExit'].x,0.5,"quadOut");end doTweenX("gameBarBGSc","gameBarBG.scale",0,0.5,"quadOut");doTweenX("gameBarTextCome","gameBarText",1300,0.5,"quadOut");doTweenX("gameBarSc","gameBar.scale",0,0.5,"quadOut");doTweenX("gameHardBarSc","gameHardBar.scale",0,0.5,"quadOut");if v40 then playSound(soundStuff.confirm,0.6,soundStuff.confirm);disableInteraction=true;v3.startTimer(0.5,function(v184,v185)disableInteraction=false;end,1);end end function backSelection()if ((curMenu:lower()=="freeplay") or (curMenu:lower()=="story") or (curMenu:lower()=="option") or (curMenu:lower()=="badges")) then if ((curMenu:lower()=="option") and (getDataFromSave("ammarc","funnyoption")~=uwuOption)) then restartSong(false);else doTweenColor("bgColor","bg",menuColor.main,1);createTexts(main_menu,true);curMenu="main";descTextY=550;doTweenAlpha("barUAlpha","barU",0.8,1);doTweenAlpha("barDAlpha","barD",0.8,1);doTweenX("buttonExit","buttonExit", -400,0.5,"quadIn");doTweenAlpha("showDifficulty","infoTxt",0,0.5);doTweenAlpha("showHardModeTxt","hardTxt",0,0.5);end if (gamePercent>0) then doTweenX("gameBarBGSc","gameBarBG.scale",1,0.5,"quadOut");doTweenX("gameBarTextCome","gameBarText",238,0.5,"quadOut");doTweenX("gameBarSc","gameBar.scale",gamePercent/100 ,0.5,"quadOut");if (gameHardPercent>0) then doTweenX("gameHardBarSc","gameHardBar.scale",gameHardPercent/100 ,0.5,"quadOut");end end else v1=true;exitSong();end playSound(soundStuff.cancel,0.6,soundStuff.cancel);end function hideButtons()if isMobileMode then doTweenX("buttonUp","buttonUp",1300,0.5,"quadIn");doTweenX("buttonDown","buttonDown",1300,0.5,"quadIn");doTweenX("buttonAccept","buttonAccept",1300,0.5,"quadIn");doTweenX("buttonExit","buttonExit", -400,0.5,"quadIn");end end function changeSelection(v41,v42)curSelect=curSelect + v41 ;if (curSelect>textLength) then curSelect=1;end if (curSelect<1) then curSelect=textLength;end if Texts[curSelect].isTitle then curSelect=curSelect + v41 ;if (curSelect>textLength) then curSelect=1;end if (curSelect<1) then curSelect=textLength;end end for v114,v115 in pairs(Texts) do if  not v115.isTitle then if (curMenu=="freeplay") then setProperty(v115.tag   .. ".color" ,getColorFromHex(((v114==curSelect) and  not v115.locked and "FFFFFFF") or "A0A0A0" ));else setProperty(v115.tag   .. ".color" ,getColorFromHex(((v114==curSelect) and "FFFFFFF") or "A0A0A0" ));end end if (v115.checkbox~=nil) then setProperty(v115.checkbox   .. ".color" ,getColorFromHex(((v114==curSelect) and "FFFFFFF") or "A0A0A0" ));if (v115.tag=="funnyoption") then setProperty(v115.checkbox   .. ".color" ,getColorFromHex(((v114==curSelect) and "ffe8fe") or "A0A0A0" ));end end if (v115.badge~=nil) then setProperty(v115.badge   .. ".color" ,getColorFromHex(((v114==curSelect) and "FFFFFFF") or "A0A0A0" ));end if (v115.tag=="funnyoption") then setProperty(v115.tag   .. ".color" ,getColorFromHex(((v114==curSelect) and "ff00f7") or "cc02c6" ));end end if ((v41~=0) and  not (v42 or false)) then playSound(soundStuff.scroll,0.6,soundStuff.scroll);end local v43=Texts[curSelect].tag;if (descTextDesc[v43]~=nil) then typeText("descTxt",descTextDesc[v43][1], #descTextDesc[v43][1] * 0.04 );end if ((curMenu=="freeplay") and (Texts[curSelect].desc~=nil)) then local v150=getDataFromSave("ammarc","highscore")[string.lower(Texts[curSelect].song:gsub("%s+","-"))];local v151=Texts[curSelect].song;if (v150~=nil) then local v192=(isSongBeated(string.gsub(Texts[curSelect].song:lower()," ","-")));local v193="\nScores: "   .. v150.scores   .. ((v192 and (" [Hard = "   .. v150.scoresH   .. "]")) or "")   .. "\nMisses: "   .. v150.misses   .. ((v192 and (" [Hard = "   .. v150.missesH   .. "]")) or "")   .. "\nRating: "   .. tostring((math.floor(v150.rating * 10000 ))/100 )   .. "%"   .. ((v192 and (" [Hard = "   .. tostring((math.floor(v150.rating * 10000 ))/100 )   .. "%]")) or "")   .. "\n(Song Completed)"   .. ((v192 and "") or "\n(Hard Mode Incomplete)") ;v151=Texts[curSelect].song   .. v193 ;end if Texts[curSelect].locked then v151="Locked";end typeText("descTxt",v151, #v151 * 0.02 );end if (curMenu=="story") then changeStoryBG(v43);end setProperty("ammar.y",15);doTweenY("ammarGoBack","ammar",0,0.5,"quadOut");end storyTween={discords={{"dnBg",{x=1280},{x=0}},{"dnDarkness",{alpha=0},{alpha=1}},{"dnUser",{x= -1280},{x=0}},{"dnTitle",{x= -1280},{x=0}}},hatingProblem={{"hpBg",{x=1280},{x=0}},{"hpBody",{x= -1280},{x=0}},{"hpBodyGlitch",{x= -1280},{x=0}},{"hpDarkness",{alpha=0},{alpha=1}},{"hpHead",{x= -1280},{x=0}},{"hpHeadGlitch",{x= -1280},{x=0}},{"hpRedDarkness",{alpha=0},{alpha=1}},{"hpTitleGlitch",{x=1280},{x=0}},{"hpTitle",{x=1280},{x=0}}}};function loadStoryBG()if (getDataFromSave("ammarc","shaders") and getPropertyFromClass("ClientPrefs","shaders")) then initLuaShader("Glitching");end local v44=function(v116)runHaxeCode("game.getLuaObject('"   .. v116   .. "').camera = camMenu;" );end;local v45="menu/weeks/discordAnnoyer/";v2.makeSprite({tag="dnBg",image=v45   .. "loopDiscordAnnoyerBG" ,x=0,y=0});v44("dnBg");setProperty("dnBG.color",getColorFromHex("A0A0A0"));v2.makeSprite({tag="dnDarkness",image=v45   .. "vignette" ,x=0,y=0});v44("dnDarkness");v2.makeSprite({tag="dnUser",image=v45   .. "user" ,x=0,y=0});v44("dnUser");v2.makeSprite({tag="dnTitle",image=v45   .. "title" ,x=0,y=0});v44("dnTitle");local v46="menu/weeks/hatingProblem/";v2.makeSprite({tag="hpBg",image=v46   .. "bg" ,x=0,y=0});v44("hpBg");v2.makeSprite({tag="hpBody",image=v46   .. "body" ,x=0,y=0});v44("hpBody");v2.makeSprite({tag="hpBodyGlitch",image=v46   .. "rgbbody" ,x=0,y=0});setBlendMode("hpBodyGlitch","add");v44("hpBodyGlitch");v2.makeSprite({tag="hpDarkness",image=v46   .. "vignette" ,x=0,y=0});v44("hpDarkness");v2.makeSprite({tag="hpHead",image=v46   .. "head" ,x=0,y=0});v44("hpHead");v2.makeSprite({tag="hpHeadGlitch",image=v46   .. "rgbhead" ,x=0,y=0});setBlendMode("hpHeadGlitch","add");v44("hpHeadGlitch");v2.makeSprite({tag="hpRedDarkness",image=v46   .. "redVignette" ,x=0,y=0});v44("hpRedDarkness");v2.makeSprite({tag="hpTitleGlitch",image=v46   .. "rgbtitle" ,x=0,y=0});setBlendMode("hpTitleGlitch","add");v44("hpTitleGlitch");v2.makeSprite({tag="hpTitle",image=v46   .. "title" ,x=0,y=0});v44("hpTitle");if (getDataFromSave("ammarc","shaders") and getPropertyFromClass("ClientPrefs","shaders")) then setSpriteShader("dnBg","scroll");setShaderFloat("dnBg","xSpeed",0.01);setShaderFloat("dnBg","ySpeed",0.1);setShaderFloat("dnBg","timeMulti",0.2);setSpriteShader("hpBodyGlitch","Glitching");setSpriteShader("hpHeadGlitch","Glitching");setSpriteShader("hpTitleGlitch","Glitching");end for v117,v118 in pairs(storyTween) do for v152,v153 in pairs(v118) do local v154=v153[1];if (v153[2].x~=nil) then setProperty(v154   .. ".x" ,v153[2].x);end if (v153[2].alpha~=nil) then setProperty(v154   .. ".alpha" ,v153[2].alpha);end end end end function updateStoryBG()local v47=os.clock();setProperty("dnUser.offset.y",(0.5 + (math.sin(v47)/2)) *  -12 );setProperty("dnTitle.offset.y",math.sin(v47) * 10 );setProperty("dnTitle.offset.x",math.cos(v47) * 5 );setProperty("hpBody.offset.y",(0.5 + (math.sin(v47)/2)) *  -12 );setProperty("hpBodyGlitch.offset.y",(0.5 + (math.sin(v47)/2)) *  -12 );setProperty("hpHead.offset.y",(0.5 + (math.sin(v47 + 0.3 )/2)) *  -12 );setProperty("hpHeadGlitch.offset.y",(0.5 + (math.sin(v47 + 0.3 )/2)) *  -12 );setProperty("hpTitle.offset.y",math.sin(v47) * 10 );setProperty("hpTitle.offset.x",math.cos(v47) * 5 );setProperty("hpTitleGlitch.offset.y",math.sin(v47) * 10 );setProperty("hpTitleGlitch.offset.x",math.cos(v47) * 5 );if (getDataFromSave("ammarc","shaders") and getPropertyFromClass("ClientPrefs","shaders")) then setShaderFloat("dnBg","iTime",os.clock());setShaderFloat("hpBodyGlitch","iTime",os.clock());setShaderFloat("hpHeadGlitch","iTime",os.clock());setShaderFloat("hpTitleGlitch","iTime",os.clock());end end function changeStoryBG(v48)for v119,v120 in pairs(storyTween) do if (v119==v48) then for v194,v195 in pairs(v120) do local v196=v195[1];if (v195[2].x~=nil) then setProperty(v196   .. ".x" ,v195[2].x);doTweenX(v196   .. "XTw" ,v196,v195[3].x,0.4,"circInOut");end if (v195[2].alpha~=nil) then setProperty(v196   .. ".alpha" ,v195[2].x);doTweenAlpha(v196   .. "AlphaTw" ,v196,v195[3].alpha,0.4,"circInOut");end end else for v197,v198 in pairs(v120) do local v199=v198[1];if (v198[2].x~=nil) then doTweenX(v199   .. "XTw" ,v199,v198[2].x,0.4,"circInOut");end if (v198[2].alpha~=nil) then doTweenAlpha(v199   .. "AlphaTw" ,v199,v198[2].alpha,0.4,"circInOut");end end end end end function isSongBeated(v49,v50)local v50=v50 or false ;local v49=string.gsub(v49:lower()," ","-");local v51=getDataFromSave("ammarc","highscore");if (v51[v49]==nil) then return false;end if (v50 and ((v51[v49].scoresH==nil) or (v51[v49].scoresH<=0))) then return false;end return true;end function saveHighscore()if v0 then return;end local v52=getDataFromSave("ammarc","highscore");local v53=string.gsub(songName:lower(),"%s+","-");if (v52[v53]==nil) then v52[v53]={scores=0,misses=0,rating=0,scoresH=0,missesH=0,ratingH=0};end if ( not everUsePractice and  not everUseBot and ((v52[v53].scores or 0)<getProperty("songScore"))) then if getDataFromSave("ammarc","hardmode") then v52[v53].scoresH=getProperty("songScore");v52[v53].missesH=getProperty("songMisses");v52[v53].ratingH=getProperty("ratingPercent");else v52[v53].scores=getProperty("songScore");v52[v53].misses=getProperty("songMisses");v52[v53].rating=getProperty("ratingPercent");end end setDataFromSave("ammarc","highscore",v52);end function loadSave()initSaveData("ammarc");if checkSaveNil("mechanic") then setDataFromSave("ammarc","mechanic",true);end if checkSaveNil("specialNotes") then setDataFromSave("ammarc","specialNotes",true);end if checkSaveNil("nobadword") then setDataFromSave("ammarc","nobadword",true);end if checkSaveNil("reduceShake") then setDataFromSave("ammarc","reduceShake",false);end if checkSaveNil("shaders") then setDataFromSave("ammarc","shaders",true);end if checkSaveNil("hardmode") then setDataFromSave("ammarc","hardmode",false);end if checkSaveNil("potatomode") then setDataFromSave("ammarc","potatomode",false);end if checkSaveNil("youtubeshort") then setDataFromSave("ammarc","youtubeshort",false);end if checkSaveNil("newSplashes") then setDataFromSave("ammarc","newSplashes",true);end if checkSaveNil("funnyoption") then setDataFromSave("ammarc","funnyoption",false);end if checkSaveNil("prevSong") then setDataFromSave("ammarc","prevSong",(songName:gsub(" ","-")):lower());end if checkSaveNil("realDebugSong") then setDataFromSave("ammarc","realDebugSong",false);end if checkSaveNil("version") then setDataFromSave("ammarc","version",2.5);end if checkSaveNil("achievements") then setDataFromSave("ammarc","achievement",{});end if checkSaveNil("highscore") then setDataFromSave("ammarc","highscore",{});end local v54=(checkSaveNil("badges") and {}) or getDataFromSave("ammarc","badges") ;for v121,v122 in pairs(badges) do if  not checkBadgeExist(v122.badge) then table.insert(v54,{badge=v122.badge,have=false});end end setDataFromSave("ammarc","badges",v54);uwuOption=getDataFromSave("ammarc","funnyoption");flushSaveData("ammarc");end function setBadgeSave(v55,v56)local v57=getDataFromSave("ammarc","badges");for v123,v124 in pairs(v57) do if (v124.badge==v55) then v124.have=v56;end end setDataFromSave("ammarc","badges",v57);end function createOptionVar()setOnLuas("mechanicOption",getDataFromSave("ammarc","mechanic"));setOnLuas("specialNotesOption",getDataFromSave("ammarc","specialNotes"));setOnLuas("nobadwordOption",getDataFromSave("ammarc","nobadword"));setOnLuas("reduceShakeOption",getDataFromSave("ammarc","reduceShake"));setOnLuas("shadersOption",getDataFromSave("ammarc","shaders"));setOnLuas("hardmodeOption",getDataFromSave("ammarc","hardmode"));setOnLuas("potatomodeOption",getDataFromSave("ammarc","potatomode"));setOnLuas("funnyoptionOption",getDataFromSave("ammarc","funnyoption"));setOnLuas("youtubeshortOption",getDataFromSave("ammarc","youtubeshort"));setOnLuas("isMobileMode",isMobileMode);end function checkBadgeExist(v58)local v59=getDataFromSave("ammarc","badges");if (v59==nil) then return false;end if checkSaveNil("badges") then return false;end for v125,v126 in pairs(v59) do if (v126.badge==v58) then return true;end end return false;end function checkBadgeGot(v60)local v61=getDataFromSave("ammarc","badges");if (v61==nil) then return false;end if checkSaveNil("badges") then return false;end for v127,v128 in pairs(v61) do if ((v128.badge==v60) and v128.have) then return true;end end return false;end function checkSaveNil(v62)if ((getDataFromSave("ammarc",v62)==nil) or (getDataFromSave("ammarc",v62)==v62)) then return true;else return false;end end function onTimerCompleted(v63,v64,v65)if (v3~=nil) then v3.timerEnd(v63,v64,v65);end if (v63=="playSong") then setPropertyFromClass("PlayState","isStoryMode",false);setPropertyFromClass("PlayState","campaignScore",0);setPropertyFromClass("PlayState","campaignMisses",0);setPropertyFromClass("PlayState","storyPlaylist",{});loadSong(v12, -1);end if (v63=="typingText") then setTextString(v11,string.sub(v10,1,v64-v65 ));end substateTimerCompleted(v63,v64,v65);end function onUpdate(v66)if (v0 and  not disableMenuUpdate) then menuUpdate(v66);end end function onUpdatePost()if ( not everUseBot and getProperty("cpuControlled")) then everUseBot=true;end if ( not everUsePractice and getProperty("practiceMode")) then everUsePractice=true;end if (missingFile and  not inGameOver) then if v0 then setProperty("bg.alpha",0.2);end setProperty("playbackRate",0.1);runHaxeCode('game.addTextToDebug("'   .. string.rep(tostring(getRandomInt(0,9999999999)),6)   .. " MISSING FILE DETECTED "   .. string.rep(tostring(getRandomInt(0,9999999999)),6)   .. '", 0xFFFF0000)' );setProperty("camHUD.angle",getRandomInt( -10,10));setProperty("camGame.angle",getRandomInt( -10,10));end if v8 then changePresence("An AMMAR CREATIVITY v3","NO Spoiler "   .. getRandomInt(1,2) );end end function onPause()if v8 then changePresence("An AMMAR CREATIVITY v3","NO Spoiler");end end function lerp(v67,v68,v69)return v67 + ((v68-v67) * v69) ;end function spriteClick(v70)if isMobileMode then local v156=getMouseX("camOther");local v157=getMouseY("camOther");local v158,v159,v160,v161=getProperty(v70   .. ".x" ),getProperty(v70   .. ".y" ),getProperty(v70   .. ".width" ),getProperty(v70   .. ".height" );return (v156>=v158) and (v156<=(v158 + v160)) and (v157>=v159) and (v157<=(v159 + v161)) and (mouseClicked("")) ;else return false;end end local v13={};local v14=0;function setOnLuas(v71,v72)if  not setOnLuas_init then setOnLuas_init=true;runHaxeCode('setVar("setOnLuas_varHolder", null);');end setProperty("setOnLuas_varHolder",{v71,v72});runHaxeCode("game.setOnLuas(getVar('setOnLuas_varHolder')[0], getVar('setOnLuas_varHolder')[1]);");setProperty("setOnLuas_varHolder",nil);if (_G[v71]==nil) then _G[v71]=v72;end end local v15=false;local v16=1;local v17=false;function onCustomSubstateCreatePost(v73)if (v73=="funnyoptionwarn") then disableInteraction=true;v16=1;runHaxeCode([[
            camSub = new FlxCamera();
            camSub.bgColor = 0x00;

            FlxG.cameras.add(camSub,false);

            blackBG = new FlxSprite(0, 0).makeGraphic(1280, 720, 0xFF000000);
            blackBG.alpha = 0;
            blackBG.camera = camSub;
            CustomSubstate.instance.add(blackBG);

            warnText = new FlxText(0, 0, 0, "
            !!WARNING!!
            THIS IS NOT FOR FURRY HATER
            Please leave if you hate furry
            I will give you free win.

            (PRESS ESCAPE TO CANCEL)
            (PRESS ENTER TO CONTINUE)
            ", 20);

            warnText.setFormat(Paths.font("vcr.ttf"), 30, 0xFFFFFFFF, "center");
            warnText.alpha = 0;
            warnText.screenCenter();
            warnText.x -= 105;
            warnText.camera = camSub;
            CustomSubstate.instance.add(warnText);

            FlxTween.tween(blackBG, {alpha: 0.8}, 0.5);
            FlxTween.tween(warnText, {alpha: 1}, 0.5);
            
        ]]);v15=false;runTimer("canPressSubstate",1);end end function onCustomSubstateUpdatePost(v74)if ((v74=="funnyoptionwarn") and v15) then if getPropertyFromClass("flixel.FlxG","keys.justPressed.ENTER") then if (v16==1) then v16=2;runHaxeCode([[

                    warnText.text = "
                    !!WARNING!!
                    ARE YOU SURE?!?!?!?!?

                    hmmmmmmm.......

                    (PRESS ESCAPE TO CANCEL)
                    (PRESS ENTER TO CONTINUE)
                    ";
                    warnText.screenCenter();
                    warnText.x -= 170;


                    camSub.shake(0.02, 0.25, null, true);
                ]]);else v17=true;runTimer("closeSubsss",2);runHaxeCode([[
                    FlxTween.tween(blackBG, {alpha: 0}, 2, {ease: FlxEase.quadIn});
                    FlxTween.tween(warnText, {alpha: 0}, 2);

                    new FlxTimer().start(0.10, function(tmr)
                        {
                            camSub.shake((20 - tmr.loopsLeft)*0.01, 0.05, null, true);
                            camMenu.shake((20 - tmr.loopsLeft)*0.01, 0.05, null, true);
                        }, 20);
                ]]);soundFadeOut("",2,0);end elseif getPropertyFromClass("flixel.FlxG","keys.justPressed.ESCAPE") then v17=false;acceptOption();runTimer("closeSubsss",0.5);runHaxeCode([[
                    FlxTween.tween(blackBG, {alpha: 0, y: -720}, 0.5, {ease: FlxEase.quadIn});
                    FlxTween.tween(warnText, {alpha: 0, y: 720}, 0.5);
                ]]);end end end function substateTimerCompleted(v75,v76,v77)if (v75=="closeSubsss") then v15=false;disableInteraction=false;closeCustomSubstate();runHaxeCode([[
            game.persistentUpdate = true;
            FlxG.cameras.remove(camSub,false);
        ]]);if v17 then disableInteraction=true;disableMenuUpdate=true;cameraFlash("camOther","FFFFFF",4);doTweenY("bgFall","bg",830,4,"quadIn");doTweenAngle("bgFallAng","bg", -10,4,"quadIn");doTweenAngle("ammarFallAng","ammar", -5,4,"quadIn");doTweenAngle("barderFallAng","barder",6,4,"quadIn");doTweenY("ammarFall","ammar",600,4,"quadIn");doTweenY("barderFall","barder",736,4,"quadIn");for v213,v214 in pairs(Texts) do doTweenY(v214.tag   .. "fally" ,v214.tag,740 + getRandomFloat(0,50) ,getRandomFloat(3,4),"backIn");doTweenY(v214.checkbox   .. "fally" ,v214.checkbox,740 + getRandomFloat(0,50) ,getRandomFloat(3,4),"backIn");doTweenX(v214.tag   .. "fallx" ,v214.tag,getProperty(v214.tag   .. ".x" ) + getRandomFloat( -10,10) ,4,"linear");doTweenX(v214.checkbox   .. "fallx" ,v214.checkbox,getProperty(v214.checkbox   .. ".x" ) + getRandomFloat( -10,10) ,4,"linear");end doTweenY("descTxtfall","descTxt",770,3.4,"backIn");runTimer("restartGame",5);end end if (v75=="canPressSubstate") then v15=true;end if (v75=="restartGame") then exitSong(false);end end